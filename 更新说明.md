# 收益计算更新说明

## 更新日期
2024年最新版本

## 主要改进

### 1. 收益分类显示
之前只显示一个综合的"账面收益"，现在分为三类：

- **账面收益（未实现）**：当前持有的比特币的潜在盈亏
- **已实现收益**：已经通过卖出操作获得的实际盈亏
- **总收益**：两者的总和

### 2. 更准确的计算方法
采用**平均成本法**计算收益：
- 所有买入的平均成本作为基准
- 卖出时，按照这个平均成本计算实际收益
- 当前持仓的成本也基于平均成本计算

### 3. 导入数据兼容性
- 导入旧数据时自动使用新的计算逻辑
- 无需手动调整，系统会自动重新计算所有收益数据

## 为什么这样改？

### 举个例子：
假设你：
1. 买入 1 BTC @ $30,000
2. 卖出 0.5 BTC @ $40,000（赚了 $5,000）
3. 当前价格 $50,000

**旧版本显示：**
- 只显示总体收益：$15,000

**新版本显示：**
- 已实现收益：$5,000（卖出时已经赚到的）
- 账面收益：$10,000（剩余0.5 BTC的潜在收益）
- 总收益：$15,000

### 优势：
1. **更清楚**：知道哪些钱已经到手，哪些还在账面上
2. **更实用**：帮助你做投资决策（是否该止盈等）
3. **更专业**：符合专业投资者的记账方式

## 界面变化

在"持仓统计"卡片中，原来的单一"账面收益"行被替换为三行：
```
账面收益（未实现）：$XXX (XX%)
已实现收益：$XXX (XX%)
总收益：$XXX (XX%)
```

## 技术细节

详细的计算方法和示例请参考：[CALCULATION_EXPLANATION.md](CALCULATION_EXPLANATION.md)

## 注意事项

1. 所有历史数据仍然存储在浏览器本地
2. 导入数据时会自动应用新的计算方法
3. 记得定期导出备份数据
4. 如有疑问，可以查看示例数据（example-data.json）中的计算结果

## 测试

项目中包含一个测试页面（test_calculation.html），可以打开它查看详细的计算过程。
